---
layout:     post
title:      shell编程技巧
date:       2019-04-04
author:     BenderFly
header-img: img/post-bg-ios9-web.jpg
catalog: true
categories: Shell
tags:
    - Shell
---

# 如何简化if else？
```
somecommand
if [ $? -ne 0 ]; then
  echo "command failed."
  exit 1
fi
```
简化的一个方法是，首先写一个die函数：
```
function die
{
  echo $@
  exit 1
}
```
然后，上面的if就可以改写为
```
somecommand || die "Command failed."
```
类似的，如果要检查某个变量var有没有设置，如果没有设置就退出，可以写成：
```
[ -z $var ] && die "environment variable var is not set"
```

# 如何判断某个字符串是不是以特定字符串开始
```
var="# this is comments"
[[ $var == "#"* ]] && echo "line starts with # is ignored."
```

